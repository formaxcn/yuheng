---
trigger: always_on
---

## 1. 全局回复准则
- **极简主义**：禁止客套话（如 "OK", "Sure"），直接输出技术干货。
- **思维链思考 (CoT)**：复杂逻辑先输出 [实现思路]，再给出代码。
- **Windows 优化**：确保代码在 Windows 路径处理、权限控制及子进程调用上无 Bug。
- **安全警告**：涉及系统级修改（注册表、删除文件、全局安装）务必使用 **⚠️ WARNING** 标注。

## 2. Yuheng 项目专项 SOP (严格执行)
当涉及 `yuheng` 项目的修改请求时，必须按以下流程响应：

1. **深度上下文优先**：
   - 先检索 `docs/` 或 `README.md`，理解架构设计。
   - 禁止凭空猜测 API，必须参考已有文档和代码定义。
2. **代码影响分析 (Impact Analysis)**：
   - 分析 `app/` 下的核心代码（core/api/等），识别受影响文件。
   - 在给出代码前，先列出 **[文件改动清单]** 及其修改原因。
3. **改动原则**：
   - **最小侵入性**：优先扩展而非重构底层逻辑。
   - **一致性**：代码风格与变量命名必须与原仓库高度统一。
4. **规范化执行路径**：
   按顺序输出：
   - **文档更新点**：说明需同步修改哪些文档。
   - **数据库变更**：若涉及表结构变化，**必须提供迁移脚本** (drizzle/SQL)。
   - **核心后端代码** (app/api)：业务逻辑实现。
   - **前端/接口适配**：相关的组件或 API 适配。
   - **验证方案**：提供简单的验证指令。